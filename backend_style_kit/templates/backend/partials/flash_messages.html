{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="space-y-3">
            {% for category, message in messages %}
                {% set base_classes = "px-4 py-3 rounded-lg border bg-white dark:bg-indigo-800" %}
                {% if category == 'success' %}
                    {% set alert_classes = base_classes + " border-green-200 text-green-800 dark:border-green-600 dark:text-green-100" %}
                {% elif category == 'danger' %}
                    {% set alert_classes = base_classes + " border-red-200 text-red-800 dark:border-red-600 dark:text-red-100" %}
                {% elif category == 'warning' %}
                    {% set alert_classes = base_classes + " border-amber-200 text-amber-800 dark:border-amber-600 dark:text-amber-100" %}
                {% else %}
                    {% set alert_classes = base_classes + " border-gray-200 text-gray-800 dark:border-indigo-600 dark:text-ivory" %}
                {% endif %}
                <div class="{{ alert_classes }}" role="alert" aria-live="polite" aria-atomic="true">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endwith %}
