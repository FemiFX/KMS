{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="space-y-3">
            {% for category, message in messages %}
                {% set base_classes = "px-4 py-3 rounded-lg border bg-white dark:bg-charcoal-800" %}
                {% if category == 'success' %}
                    {% set alert_classes = base_classes + " border-emerald-200 text-emerald-800 dark:border-emerald-600 dark:text-emerald-100" %}
                {% elif category == 'danger' %}
                    {% set alert_classes = base_classes + " border-red-200 text-red-800 dark:border-red-600 dark:text-red-100" %}
                {% elif category == 'warning' %}
                    {% set alert_classes = base_classes + " border-heritage-200 text-heritage-800 dark:border-heritage-600 dark:text-heritage-100" %}
                {% else %}
                    {% set alert_classes = base_classes + " border-gray-200 text-gray-800 dark:border-graphite-600 dark:text-ivory" %}
                {% endif %}
                <div class="{{ alert_classes }}" role="alert" aria-live="polite" aria-atomic="true">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endwith %}
